var app=angular.module("angular-mini-preview",[]),prefix="ng-mini-preview",AngularMiniPreview=function(a,b){this.element=a,this.element.addClass(prefix+"-anchor"),this.generate()};AngularMiniPreview.prototype={options:{width:300,height:200,scale:.25,load:"preload"},generate:function(){this.generateElements(),this.load()},generateElements:function(){var a=angular.element("<div>").addClass(prefix+"-wrapper").css({width:this.options.width+"px",height:this.options.height+"px",top:(this.element[0].height||this.element[0].offsetHeight)/2+"px",left:(this.element[0].width||this.element[0].offsetWidth)/2+"px"}),b=angular.element("<div>").addClass(prefix+"-loading"),c=angular.element("<iframe>").addClass(prefix+"-frame").css({width:100/this.options.scale+"%",height:100/this.options.scale+"%",transform:"scale("+this.options.scale+")","-ms-transform":"scale("+this.options.scale+")","-moz-transform":"scale("+this.options.scale+")","-webkit-transform":"scale("+this.options.scale+")","-o-transform":"scale("+this.options.scale+")"});a.append(b),a.append(c),this.element.append(a)},load:function(){switch(this.options.load){case"preload":this.preview();break;default:throw"Load setting not recognized: "+this.options.load}},preview:function(){var a=this.element.find("iframe");a&&a.attr("src",this.element.attr("href"))}},app.directive("miniPreview",function(){return{restrict:"A",link:function(a,b,c){new AngularMiniPreview(b,c)}}});